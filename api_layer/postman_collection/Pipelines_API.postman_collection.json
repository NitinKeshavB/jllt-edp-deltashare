{
	"info": {
		"_postman_id": "f1e2d3c4-b5a6-4c7d-8e9f-0a1b2c3d4e5f",
		"name": "Delta Share - Pipelines API",
		"description": "Complete API collection for managing Delta Live Tables (DLT) pipelines with comprehensive pre-creation validations",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "https://api-dev.jll.com/udp/dltshr",
			"type": "string"
		},
		{
			"key": "workspace_url",
			"value": "https://adb-1234567890123456.12.azuredatabricks.net",
			"type": "string"
		},
		{
			"key": "subscription_key",
			"value": "your-subscription-key-here",
			"type": "string"
		},
		{
			"key": "pipeline_name",
			"value": "test_pipeline",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "List All Pipelines",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/pipelines?page_size=100&search_string=",
					"host": ["{{base_url}}"],
					"path": ["pipelines"],
					"query": [
						{
							"key": "page_size",
							"value": "100",
							"description": "Maximum number of pipelines to return (default: 100)"
						},
						{
							"key": "search_string",
							"value": "",
							"description": "Optional search string to filter pipelines by name"
						}
					]
				},
				"description": "List all DLT pipelines with optional name filtering. Returns pipeline details including ID, name, state, and configuration."
			},
			"response": []
		},
		{
			"name": "Get Pipeline by Name",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}"]
				},
				"description": "Get details of a specific DLT pipeline by name. Returns full pipeline configuration.\n\nValidation: Pipeline name is required and cannot be empty or have leading/trailing spaces.\n\nResponse 200: GetPipelineResponse\nResponse 400: Invalid pipeline name\nResponse 404: Pipeline not found"
			},
			"response": []
		},
		{
			"name": "Create Pipeline",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"target_catalog_name\": \"my_catalog\",\n  \"target_schema_name\": \"my_schema\",\n  \"configuration\": {\n    \"pipelines.source_table\": \"catalog.schema.source_table\",\n    \"pipelines.keys\": \"id\",\n    \"pipelines.target_table\": \"target_table_name\",\n    \"pipelines.scd_type\": \"2\"\n  },\n  \"notifications_list\": [\n    \"user@example.com\",\n    \"data-engineering-team\"\n  ],\n  \"tags\": {\n    \"environment\": \"production\",\n    \"owner\": \"data-team\"\n  },\n  \"serverless\": true\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}"]
				},
				"description": "Create a new DLT pipeline with comprehensive automated validations.\n\nRequired fields:\n- target_catalog_name: Unity Catalog name\n- target_schema_name: Target schema name\n- configuration.pipelines.source_table: Source table (catalog.schema.table)\n- configuration.pipelines.keys: Primary key column(s)\n- configuration.pipelines.target_table: Target table name\n- configuration.pipelines.scd_type: SCD type (1 or 2)\n\nOptional fields:\n- notifications_list: Email addresses and/or AD group names\n- tags: Key-value pairs for pipeline metadata\n- serverless: Enable serverless compute (default: true)\n\nPre-creation validations:\n1. Target Catalog: Creates if not exists\n2. Target Schema: Creates if not exists\n3. Source Table: Validates existence and CDF enabled\n4. Pipeline Keys: Verifies columns exist in source table\n\nResponse 201: CreatePipelineResponse or GetPipelineResponse\nResponse 400: Invalid request\nResponse 409: Pipeline already exists\nResponse 422: Validation error"
			},
			"response": []
		},
		{
			"name": "Delete Pipeline",
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}"]
				},
				"description": "Delete a DLT pipeline by name. User must be the owner.\n\nResponse 200: Pipeline deleted successfully\nResponse 400: Invalid pipeline name\nResponse 403: Permission denied\nResponse 404: Pipeline not found"
			},
			"response": []
		},
		{
			"name": "Update Pipeline Configuration",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"pipelines.keys\": \"id,timestamp\",\n  \"pipelines.target_table\": \"updated_target_table\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}/configuration",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}", "configuration"]
				},
				"description": "Update DLT pipeline configuration (partial update for keys and target_table only).\n\nUpdateable fields:\n- pipelines.keys: Primary key column(s)\n- pipelines.target_table: Target table name\n\nImmutable fields (cannot be changed):\n- pipelines.source_table\n- pipelines.scd_type\n\nAt least one field must be provided.\n\nResponse 200: message, fields_updated\nResponse 400: Invalid request\nResponse 403: Permission denied\nResponse 404: Pipeline not found\nResponse 422: Validation error"
			},
			"response": []
		},
		{
			"name": "Update Pipeline Libraries",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"library_path\": \"/Workspace/Shared/.bundle/dab_project/prod/files/citibike_etl/dlt/pattern/pattern-load.py\",\n  \"root_path\": \"/Workspace/Shared/.bundle/dab_project/prod/files\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}/libraries",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}", "libraries"]
				},
				"description": "Update DLT pipeline library path and/or root folder path.\n\nUpdateable fields:\n- library_path: Path to notebook/Python file (must start with /Workspace/ or /Repos/ and end with .py)\n- root_path: Root folder path (must start with /Workspace/ or /Repos/)\n\nAt least one field must be provided.\n\nResponse 200: message, library_path, root_path\nResponse 400: Invalid request\nResponse 403: Permission denied\nResponse 404: Pipeline not found\nResponse 422: Validation error"
			},
			"response": []
		},
		{
			"name": "Add Notification Recipients",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"notifications_list\": [\n    \"new-user@example.com\",\n    \"data-team\",\n    \"monitoring-alerts\"\n  ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}/notifications/add",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}", "notifications", "add"]
				},
				"description": "Add notification recipients to a DLT pipeline. ADDS to existing (does not replace).\n\nAccepts email addresses and AD group names. Duplicates are ignored.\n\nNotifications sent for: on-update-failure, on-update-fatal-failure, on-update-success, on-flow-failure\n\nResponse 200: message, newly_added, already_existing, all_notifications\nResponse 400: Invalid request\nResponse 403: Permission denied\nResponse 404: Pipeline not found"
			},
			"response": []
		},
		{
			"name": "Remove Notification Recipients",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"notifications_list\": [\n    \"old-user@example.com\",\n    \"deprecated-team\"\n  ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}/notifications/remove",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}", "notifications", "remove"]
				},
				"description": "Remove notification recipients from a DLT pipeline.\n\nAt least one recipient must remain after removal.\n\nResponse 200: message, removed_notifications, not_found, remaining_notifications\nResponse 400: Invalid request\nResponse 403: Permission denied\nResponse 404: Pipeline not found"
			},
			"response": []
		},
		{
			"name": "Update Continuous Mode",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"continuous\": true\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}/continuous",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}", "continuous"]
				},
				"description": "Update continuous mode of a DLT pipeline.\n\ncontinuous=true: Pipeline runs continuously (streaming/real-time)\ncontinuous=false: Pipeline runs in triggered mode (batch/scheduled)\n\nResponse 200: message, pipeline_name, continuous, mode\nResponse 400: Invalid request\nResponse 403: Permission denied\nResponse 404: Pipeline not found"
			},
			"response": []
		},
		{
			"name": "Full Refresh Pipeline",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "X-Workspace-URL",
						"value": "{{workspace_url}}",
						"type": "text"
					},
					{
						"key": "Subscription-Key",
						"value": "{{subscription_key}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/pipelines/{{pipeline_name}}/full-refresh",
					"host": ["{{base_url}}"],
					"path": ["pipelines", "{{pipeline_name}}", "full-refresh"]
				},
				"description": "Perform a full refresh of a DLT pipeline. Recomputes all tables from scratch.\n\nBehavior:\n- IDLE/STOPPED: Full refresh starts immediately\n- RUNNING/STARTING/STOPPING: Pipeline stopped first, then refresh starts\n- Max wait: 10 minutes (600s) for pipeline to stop\n\nWarning: This will DELETE all existing data in target tables.\n\nResponse 200: message, pipeline_name, action, status\nResponse 400: Invalid pipeline name\nResponse 403: Permission denied\nResponse 404: Pipeline not found\nResponse 408: Timeout waiting for pipeline to stop"
			},
			"response": []
		}
	]
}
